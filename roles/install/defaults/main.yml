---

# nginx worker_processes directive.
# Use a fixed number if you want predictable process count.
# If undefined, the template defaults to 'auto'.
# nginx_worker_processes: 4

# nginx events.worker_connections.
# Default in upstream nginx.conf is often 1024; raise this for high concurrency.
nginx_worker_connections: 8192

nginx_worker_rlimit_nofile: 1024000

# nginx events.multi_accept (on/off).
# When set, a worker accepts as many connections as possible at a time.
# Leave undefined to keep nginx default.
# nginx_multi_accept: on

# nginx http.keepalive_timeout.
# Very large values can keep many idle sockets around and exhaust worker_connections.
nginx_keepalive_timeout: 65s

# nginx http.keepalive_requests.
# Limit requests per keepalive connection (helps with long-lived clients).
# Leave undefined to use nginx default.
# nginx_keepalive_requests: 10000

# nginx worker_rlimit_nofile.
# Should match your OS/service limits if you increase worker_connections.
# Leave undefined to keep OS default.
# nginx_worker_rlimit_nofile: 200000

nginx_user: www-data
nginx_group: www-data

# It's necessary disable catching of default port 80 by Nginx to make LE working
catch_default_80: false
# It's necessary disable catching of default port 443 by Nginx to make Signal proxy working on default HTTPS port
catch_default_443: false

# Optional additional OS packages to install together with nginx-full.
nginx_extra_packages: []

# Manage /etc/logrotate.d/nginx from this role.
nginx_logrotate_enabled: true
nginx_logrotate_path: /etc/logrotate.d/nginx
nginx_logrotate_logs:
  - /var/log/nginx/*.log
nginx_logrotate_frequency: daily
nginx_logrotate_rotate: 14
nginx_logrotate_missingok: true
nginx_logrotate_notifempty: true
nginx_logrotate_compress: true
nginx_logrotate_delaycompress: true
nginx_logrotate_create: "0640 www-data adm"
nginx_logrotate_sharedscripts: true
nginx_logrotate_prerotate_script: |
  if [ -d /etc/logrotate.d/httpd-prerotate ]; then \
          run-parts /etc/logrotate.d/httpd-prerotate; \
  fi \
nginx_logrotate_postrotate_command: "invoke-rc.d nginx rotate >/dev/null 2>&1"

# Extra raw logrotate directives appended inside the block.
# Example:
# nginx_logrotate_extra_options:
#   - maxsize 500M
nginx_logrotate_extra_options: []

# Optional dedicated cron schedule for Nginx logrotate config only.
# Useful for sub-daily rotations like hourly or every 6 hours.
# When enabled, the role installs a cron entry running:
#   logrotate -s <state_file> <nginx_logrotate_path>
nginx_logrotate_cron_enabled: false
nginx_logrotate_cron_name: "logrotate nginx"
nginx_logrotate_cron_user: root
nginx_logrotate_cron_minute: "10"
nginx_logrotate_cron_hour: "*"
nginx_logrotate_state_file: /var/lib/logrotate/status-nginx

# Example:
# nginx_extra_packages:
#   - libnginx-mod-http-headers-more-filter
